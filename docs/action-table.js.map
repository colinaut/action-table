{"version":3,"file":"action-table.js","sources":["../src/action-table.ts"],"sourcesContent":["import { ColsArray, FiltersObject, SingleFilterObject, ActionCell } from \"./types\";\nimport { ActionTableFilters } from \"./action-table-filters\";\nexport class ActionTable extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\n\t\t/* -------------------------------------------------------------------------- */\n\t\t/*                                    Init                                    */\n\t\t/* -------------------------------------------------------------------------- */\n\t\t/* ------------------- Only fires once on js initial load ------------------- */\n\t\t/* --------------- Does not require the inner DOM to be ready --------------- */\n\n\t\t// 1. set initial values\n\t\tthis.direction = \"ascending\";\n\n\t\t// 2. Add Event Listeners (loading them here means I don't need disconnectedCallback)\n\t\tthis.addEventListeners();\n\t}\n\n\tpublic tbody!: HTMLTableSectionElement;\n\tpublic thead!: HTMLTableSectionElement;\n\tprivate tfoot!: HTMLTableSectionElement;\n\tprivate ths!: NodeListOf<HTMLTableCellElement>;\n\tpublic cols: ColsArray = [];\n\tpublic filters: FiltersObject = {};\n\tprivate rowsArray!: Array<HTMLTableRowElement>;\n\tprivate ready = false;\n\tprivate colGroupCols!: NodeListOf<HTMLTableColElement>;\n\n\t/* -------------------------------------------------------------------------- */\n\t/*                                 Attributes                                 */\n\t/* -------------------------------------------------------------------------- */\n\n\tstatic get observedAttributes(): string[] {\n\t\treturn [\"sort\", \"direction\", \"store\", \"params\", \"id\"];\n\t}\n\n\t// sort attribute to set the sort column\n\n\tget sort(): string {\n\t\treturn this.getAttribute(\"sort\")?.trim().toLowerCase() || \"\";\n\t}\n\tset sort(value: string) {\n\t\tthis.setAttribute(\"sort\", value);\n\t}\n\n\t// direction attribute to set the sort direction\n\tget direction(): \"ascending\" | \"descending\" {\n\t\tconst direction = this.getAttribute(\"direction\")?.trim().toLowerCase();\n\t\tif (direction === \"ascending\" || direction === \"descending\") {\n\t\t\treturn direction;\n\t\t}\n\t\treturn \"ascending\";\n\t}\n\tset direction(value: \"ascending\" | \"descending\") {\n\t\tthis.setAttribute(\"direction\", value);\n\t}\n\n\t// store attribute to trigger loading and saving to sort and filters localStorage\n\tget store(): boolean {\n\t\treturn this.hasAttribute(\"store\");\n\t}\n\n\t// URLparams attribute to trigger checking URL params on load\n\tget URLparams(): boolean {\n\t\treturn this.hasAttribute(\"urlparams\");\n\t}\n\n\tget id(): string {\n\t\treturn this.getAttribute(\"id\") || \"\";\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*                             Connected Callback                             */\n\t/* -------------------------------------------------------------------------- */\n\t/* ------------- Fires every time the event is added to the DOM ------------- */\n\n\tpublic connectedCallback(): void {\n\t\t/* -------------- Init code which requires DOM to be ready -------------- */\n\n\t\tthis.init();\n\t}\n\n\tprivate async init() {\n\t\t// 1. Get table, tbody, rows, and column names in this.cols\n\t\tthis.getTable();\n\n\t\t// 2. wait for any custom elements to to load; need this in case action-table-switch or similar elements are used\n\t\tawait this.waitForCustomElements(this.tbody);\n\n\t\t// 3. Get table content\n\t\tthis.getTableContent();\n\n\t\t// 4. add mutation observer to tbody\n\n\t\tthis.addObserver(this.tbody);\n\n\t\t// 5. Add no results tfoot message\n\t\tthis.addNoResultsTfoot();\n\n\t\t// 6. Get local storage for sort and filters. Overrides attributes\n\t\tthis.getLocalStorage();\n\t\t// console.log(\"3. init: getLocalStorage ~ this.filters\", this.filters);\n\n\t\t// 7. Get URL params. Overrides local storage and attributes\n\t\tthis.getURLParams();\n\t\t// console.log(\"4. init: getURLParams ~ this.filters\", this.filters);\n\n\t\t// 8. sort the table\n\t\tif (this.sort) this.sortTable();\n\n\t\t// 9. set ready so that attributeChangedCallback can run automatically when sort or direction is changed\n\t\tthis.ready = true;\n\n\t\t// 10. Sort & Filter Table if they have values\n\t\tif (Object.keys(this.filters).length > 0) {\n\t\t\tthis.initialFilter();\n\t\t}\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*                         Attribute Changed Callback                        */\n\t/* -------------------------------------------------------------------------- */\n\n\tpublic attributeChangedCallback(name: string, oldValue: string, newValue: string) {\n\t\tif (oldValue !== newValue) {\n\t\t\tif (name === \"sort\" || name === \"direction\") {\n\t\t\t\t// this ready is set to true after localstorage and URL Params are loaded. This stops it from sorting multiple times on load.\n\t\t\t\tif (this.ready) this.sortTable();\n\t\t\t}\n\t\t}\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*                               PRIVATE METHODS                              */\n\t/* -------------------------------------------------------------------------- */\n\n\t/* -------------------------------------------------------------------------- */\n\t/*                   Private Method: Trigger Initial Filter                   */\n\t/* -------------------------------------------------------------------------- */\n\n\tprivate async initialFilter() {\n\t\t// 1. wait for any custom elements to to load\n\t\t/* this is needed in case there are action-table-switch or similar elements in the table that need to be filtered or sorted\n        /* it is also needed for setting the filter elements in the action-table-filters\n        */\n\t\tconst customEls = await this.waitForCustomElements();\n\n\t\t// 2. Filter the table now that the custom elements have loaded\n\t\tthis.filterTable();\n\n\t\t// 2. If no rows are shown then reset the filters\n\t\tif (this.rowsShown.length === 0) {\n\t\t\tthis.resetFilters();\n\t\t}\n\n\t\t// 4. if <action-table-filters> exists then trigger setFilterElements\n\t\tif (customEls.length > 0) {\n\t\t\tconst actionTableFilters = customEls.find((el) => el.tagName.toLowerCase() === \"action-table-filters\") as ActionTableFilters;\n\t\t\tif (actionTableFilters) {\n\t\t\t\tactionTableFilters.setFilterElements(this.filters);\n\t\t\t}\n\t\t}\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*        Private Method: Wait for inner custom elements to be defined        */\n\t/* -------------------------------------------------------------------------- */\n\n\tprivate async waitForCustomElements(node: Element = this): Promise<Element[]> {\n\t\t// 1. Get any custom elements\n\t\tconst customElementsArray = Array.from(node.querySelectorAll(\"*\")).filter((el) => el.tagName.indexOf(\"-\") !== -1);\n\n\t\t// 2. Return if empty or all custom elements are defined\n\t\tconst allDefined = customElementsArray.every((element) => element && customElements.get(element.tagName.toLowerCase()));\n\t\tif (allDefined) {\n\t\t\treturn customElementsArray;\n\t\t}\n\t\t// 3. Create custom elements when defined Array\n\t\tconst customElementsDefinedArray = customElementsArray.map((element) => customElements.whenDefined(element.tagName.toLowerCase()));\n\t\t// 4. Create Timeout Promise\n\t\tconst timeoutPromise = new Promise<Element[]>((_, reject) => setTimeout(() => reject(\"Timeout\"), 300));\n\t\ttry {\n\t\t\t// 5. Wait for custom elements or timeout\n\t\t\tawait Promise.race([Promise.all(customElementsDefinedArray), timeoutPromise]);\n\t\t\treturn customElementsArray;\n\t\t} catch (error) {\n\t\t\t// Handle timeout error here\n\t\t\t// eslint-disable-next-line  no-console\n\t\t\tconsole.error(\"Timeout occurred while waiting for custom elements\");\n\t\t\treturn [];\n\t\t}\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*                           Filter variable methods                          */\n\t/* -------------------------------------------------------------------------- */\n\n\tprivate setFilter(columnName: string, values: string[], exclusive = false): void {\n\t\t// 1. create temporary filter object\n\t\tconst filters = this.filters;\n\t\t// 2. Make sure filter actually exists as a column name and isn't search whole table special name \"action-table\"\n\t\tif (!this.doesColumnExist(columnName)) return;\n\t\t// 3. makes sure that the column name key exists; if not create it\n\t\tfilters[columnName] = filters[columnName] || {};\n\t\t// 4. add values to filter object\n\t\tfilters[columnName].values = values;\n\t\t// 5. Add exclusive if true\n\t\tif (exclusive) filters[columnName].exclusive = exclusive;\n\t\t// 6. Replace existing this.filters with new\n\t\tthis.filters = filters;\n\t\t// 7. Update local storage\n\t\tthis.setFiltersLocalStorage();\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*                Private Method: make sure columnName is legit               */\n\t/* -------------------------------------------------------------------------- */\n\n\tprivate doesColumnExist(columnName: string): boolean {\n\t\treturn this.cols.includes(columnName) || columnName === \"action-table\";\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*              Private Method: localStorage for sort and filters             */\n\t/* -------------------------------------------------------------------------- */\n\n\tprivate getLocalStorage(): void {\n\t\tif (!this.store) return;\n\t\t// 1. Get sort and direction from local storage\n\t\tconst lsActionTable = localStorage.getItem(`action-table${this.id ? `-${this.id}` : \"\"}`);\n\t\tif (lsActionTable) {\n\t\t\tconst lsActionTableJSON = JSON.parse(lsActionTable) as { sort: string; direction: \"ascending\" | \"descending\" };\n\t\t\tthis.sort = lsActionTableJSON.sort;\n\t\t\tthis.direction = lsActionTableJSON.direction;\n\t\t}\n\n\t\t// 2. Get filters from localStorage\n\t\tconst lsActionTableFilters = localStorage.getItem(`action-table-filters${this.id ? `-${this.id}` : \"\"}`);\n\t\tif (lsActionTableFilters) {\n\t\t\tthis.filters = JSON.parse(lsActionTableFilters) as FiltersObject;\n\t\t}\n\t}\n\n\t/* ---------------------------- Set Local Storage --------------------------- */\n\n\tprivate setFiltersLocalStorage() {\n\t\tif (this.store) localStorage.setItem(`action-table-filters${this.id ? `-${this.id}` : \"\"}`, JSON.stringify(this.filters));\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*         Private Method: get URLSearchParams for sort and filters           */\n\t/* -------------------------------------------------------------------------- */\n\n\tprivate getURLParams(): void {\n\t\tif (!this.URLparams) return;\n\t\tconst params = new URLSearchParams(window.location.search);\n\t\tif (params.size === 0) {\n\t\t\treturn;\n\t\t}\n\t\t// Get sort and direction from URL\n\t\tthis.sort = params.get(\"sort\") || this.sort;\n\t\tconst direction = params.get(\"direction\");\n\t\tif (direction === \"ascending\" || direction === \"descending\") {\n\t\t\tthis.direction = direction;\n\t\t}\n\n\t\t// sort through remaining params for filters to create a filters object\n\t\tconst filters: FiltersObject = {};\n\t\tfor (const [key, value] of params.entries()) {\n\t\t\t// Only add key if it's not sort or direction and exists as a column name\n\t\t\tif (key !== \"sort\" && key !== \"direction\" && this.doesColumnExist(key)) {\n\t\t\t\tfilters[key] = filters[key] || {};\n\t\t\t\tfilters[key].values = [value];\n\t\t\t}\n\t\t}\n\n\t\t// if filters object is not empty, set this.filters\n\t\tif (Object.keys(filters).length > 0) {\n\t\t\tthis.filters = filters;\n\t\t}\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*                  Private Method: add event listeners                       */\n\t/* -------------------------------------------------------------------------- */\n\n\tprivate addEventListeners(): void {\n\t\tthis.addEventListener(\n\t\t\t\"click\",\n\t\t\t(event) => {\n\t\t\t\tconst el = event.target as HTMLInputElement;\n\t\t\t\t// only fire if event target is a button with data-col\n\t\t\t\tif (el.tagName === \"BUTTON\" && el.dataset.col) {\n\t\t\t\t\tconst name = el.dataset.col;\n\t\t\t\t\tlet direction: \"ascending\" | \"descending\" = \"ascending\";\n\t\t\t\t\tif (this.sort === name && this.direction === \"ascending\") {\n\t\t\t\t\t\tdirection = \"descending\";\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.sort = name;\n\t\t\t\t\tthis.direction = direction;\n\t\t\t\t\tif (this.store) localStorage.setItem(`action-table${this.id ? `-${this.id}` : \"\"}`, JSON.stringify({ sort: this.sort, direction: direction }));\n\t\t\t\t}\n\t\t\t},\n\t\t\tfalse\n\t\t);\n\n\t\tthis.addEventListener(\"change\", (event) => {\n\t\t\tconst el = event.target as HTMLInputElement;\n\t\t\t// only fire if event target is a checkbox in a td; this stops it firing for filters\n\t\t\tif (el.closest(\"td\") && el.type === \"checkbox\") {\n\t\t\t\t// get new content, sort and filter. This works for checkboxes and action-table-switch\n\t\t\t\tconsole.log(\"event change\", el);\n\n\t\t\t\tthis.getTableContent();\n\t\t\t\tthis.sortTable();\n\t\t\t\tthis.filterTable();\n\t\t\t}\n\t\t});\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*           Private Method: get table, tbody, rows, and column names         */\n\t/* -------------------------------------------------------------------------- */\n\n\tprivate getTable(): void {\n\t\tconst table = this.querySelector(\"table\") as HTMLTableElement;\n\t\tthis.thead = table.querySelector(\"thead\") as HTMLTableSectionElement;\n\t\tthis.tbody = table.querySelector(\"tbody\") as HTMLTableSectionElement;\n\t\tconst rows = this.tbody.querySelectorAll(\"tbody tr\") as NodeListOf<HTMLTableRowElement>;\n\t\tthis.rowsArray = Array.from(rows);\n\t\tthis.getColumns(table);\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*                 Private Method: get columns from table                      */\n\t/* -------------------------------------------------------------------------- */\n\n\tprivate getColumns(table: HTMLTableElement): ColsArray {\n\t\t// 1. Get column headers\n\t\tthis.ths = table.querySelectorAll(\"th\");\n\n\t\tif (this.ths) {\n\t\t\tthis.ths.forEach((th) => {\n\t\t\t\t// 2. Column name is based on data-col attribute or results of getCellContent() function\n\t\t\t\tlet name = th.dataset.col || this.getCellContent(th);\n\t\t\t\t// 3. Remove whitespace and convert to lowercase\n\t\t\t\tname = name.trim().toLowerCase();\n\t\t\t\tif (name) {\n\t\t\t\t\t// 4. Add column name to cols array\n\t\t\t\t\tthis.cols.push(name);\n\t\t\t\t\t// 5. Set data-col attribute for easy access later\n\t\t\t\t\tth.dataset.col = name;\n\t\t\t\t\t// 6. if the column is sortable then wrap it in a button, and add aria\n\t\t\t\t\tif (!th.hasAttribute(\"no-sort\")) {\n\t\t\t\t\t\tth.innerHTML = `<button data-col=\"${name}\">${th.innerHTML}</button>`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// 7. add colGroup unless it already exists\n\t\tconst colGroup = table.querySelector(\"colgroup\");\n\t\tif (!colGroup) {\n\t\t\t// 7.1 create colgroup\n\t\t\tconst colGroup = document.createElement(\"colgroup\");\n\t\t\t// 7.2 add col for each column\n\t\t\tthis.cols.forEach(() => {\n\t\t\t\tconst col = document.createElement(\"col\");\n\t\t\t\tcolGroup.appendChild(col);\n\t\t\t});\n\t\t\t// 7.3 prepend colgroup\n\t\t\ttable.prepend(colGroup);\n\t\t}\n\n\t\tthis.colGroupCols = this.querySelectorAll(\"col\");\n\t\t// console.log(\"action-table cols\", this.cols);\n\t\t// 8. Return cols array\n\t\treturn this.cols;\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*               Private Method: add a No Results tfoot message               */\n\t/* -------------------------------------------------------------------------- */\n\n\tprivate addNoResultsTfoot() {\n\t\tconst tfoot = document.createElement(\"tfoot\");\n\t\ttfoot.classList.add(\"no-results\");\n\t\ttfoot.innerHTML = `<tr><td colspan=\"${this.cols.length}\"><p>No Results</p> <p><button>Reset Filters</button></p></td></tr>`;\n\t\ttfoot.addEventListener(\"click\", (e) => {\n\t\t\tconst button = e.target as HTMLButtonElement;\n\t\t\tif (button.tagName !== \"BUTTON\") return;\n\t\t\t// 1. Reset the filters and filterTable element\n\t\t\tthis.resetFilters();\n\t\t\t// 2. if <action-table-filter> exists then trigger resetAllFilterElements\n\t\t\tconst actionTableFilters = this.querySelector(\"action-table-filters\") as ActionTableFilters;\n\t\t\tif (actionTableFilters) {\n\t\t\t\tactionTableFilters.resetAllFilterElements();\n\t\t\t}\n\t\t});\n\t\ttfoot.style.display = \"none\";\n\t\tthis.tfoot = tfoot;\n\t\tthis.tbody.after(this.tfoot);\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*                     Private Method: get cell content                        */\n\t/* -------------------------------------------------------------------------- */\n\tprivate getCellContent(cell: HTMLTableCellElement): string {\n\t\t// 1. get cell content with innerText\n\t\tlet cellContent: string = cell?.innerText || \"\";\n\t\t// 2. trim to make sure it's not just spaces\n\t\tcellContent = cellContent?.trim();\n\n\t\t// 3. if there is no cell content then check...\n\t\tif (!cellContent) {\n\t\t\t// 3.1 if there is an svg then get title; otherwise return empty string\n\t\t\tconst svg = cell.querySelector(\"svg\") as SVGElement;\n\t\t\tif (svg) {\n\t\t\t\tcellContent = svg.querySelector(\"title\")?.textContent || \"\";\n\t\t\t}\n\t\t\t// 3.2 if checkbox element then get value if checked\n\t\t\tconst checkbox = cell.querySelector(\"[type=checkbox]\") as HTMLInputElement;\n\t\t\tif (checkbox?.checked) {\n\t\t\t\tcellContent = checkbox.value;\n\t\t\t}\n\t\t}\n\t\treturn cellContent.trim();\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*                        Private Method Get Table Data                       */\n\t/* -------------------------------------------------------------------------- */\n\t/* ------- Get all table content as data for quicker sorting/filtering ------ */\n\n\tprivate getTableContent() {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.time(\"getTableContent\");\n\t\tthis.rowsArray.forEach((row) => {\n\t\t\t// const rowObj: RowData = { node: row, columns: {} };\n\t\t\t// 1. grab all cells in the row\n\t\t\tconst cells = row.querySelectorAll(\"td\");\n\t\t\tthis.cols.forEach((col, i) => {\n\t\t\t\t// 1. cell matching column name\n\t\t\t\tconst cell = cells[i] as ActionCell;\n\n\t\t\t\tconst cellContent = this.getCellContent(cell);\n\t\t\t\tcell.actionTable = {\n\t\t\t\t\tcol,\n\t\t\t\t\tsort: cell.dataset.sort || cellContent,\n\t\t\t\t\tfilter: cell.dataset.filter || cellContent,\n\t\t\t\t};\n\t\t\t});\n\t\t});\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.timeEnd(\"getTableContent\");\n\t}\n\n\tprivate addObserver(tbody: HTMLTableSectionElement) {\n\t\t// Goode reference for MutationObserver: https://davidwalsh.name/mutationobserver-api\n\t\t// 1. Create an observer instance\n\t\tconst observer = new MutationObserver((mutations) => {\n\t\t\t// 1.1 sort through all mutations\n\t\t\tmutations.forEach((mutation) => {\n\t\t\t\tconst target = mutation.target as Element;\n\t\t\t\tif (target instanceof HTMLTableCellElement || target instanceof HTMLSpanElement || target instanceof HTMLLIElement) {\n\t\t\t\t\t// 1.2 if mutation.target is a cell, span, or then run getTableContent, filterTable, and sortTable\n\t\t\t\t\tconsole.log(\"MutationObserver\", target, mutation.type);\n\t\t\t\t\tthis.getTableContent();\n\t\t\t\t\tthis.filterTable();\n\t\t\t\t\tthis.sortTable();\n\t\t\t\t}\n\t\t\t});\n\t\t\t// }\n\t\t});\n\t\tobserver.observe(tbody, { childList: true, subtree: true, attributes: true });\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*                               PUBLIC METHODS                               */\n\t/* -------------------------------------------------------------------------- */\n\n\t/* -------------------------------------------------------------------------- */\n\t/*                        Public Method: reset filters                        */\n\t/* -------------------------------------------------------------------------- */\n\t/* ---------- Used by reset button in action-table-filters element ---------- */\n\n\tpublic resetFilters(): void {\n\t\t// remove all filters from this.col then call filterTable\n\t\tthis.filters = {};\n\t\tthis.setFiltersLocalStorage();\n\t\tthis.filterTable();\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*            Public Method: filter table on column name and value            */\n\t/* -------------------------------------------------------------------------- */\n\t/* ------------- Used by filters in action-table-filter element ------------- */\n\t/* ------------- Also triggered by local storage and URL params ------------- */\n\n\tpublic filterTable(columnName: string = \"\", values: string[] = [], exclusive = false, regexOpt = \"i\"): void {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.time(\"filterTable\");\n\t\tcolumnName = columnName.trim().toLowerCase();\n\t\t// this.filterTable(columnName, values, exclusive, regexOpt);\n\n\t\t// 1. If columnName exists as a column then store filter value locally and in localStorage; otherwise filter table based on existed filter\n\t\tif (this.doesColumnExist(columnName)) {\n\t\t\tthis.setFilter(columnName, values, exclusive);\n\t\t}\n\n\t\t// 2. get filter value for whole row based on special reserved name \"action-table\"\n\t\tconst filterForWholeRow = this.filters[\"action-table\"];\n\t\tconsole.log(\"ðŸš€ ~ file: action-table.ts:511 ~ filterTable ~ filterForWholeRow:\", filterForWholeRow);\n\n\t\t// 3. Filter based on filter value\n\t\tthis.rowsArray.forEach((row) => {\n\t\t\t// 3.1 set base display value as \"\"\n\t\t\tlet display = \"\";\n\t\t\t// 3.2 get td cells\n\t\t\tconst cells = row.querySelectorAll(\"td\") as NodeListOf<ActionCell>;\n\t\t\t// 3.3 if filter value for whole row exists then run filter against innerText of entire row content\n\t\t\tif (filterForWholeRow) {\n\t\t\t\t// 3.3.1 build string of all td data-filter values\n\t\t\t\tconst content = Array.from(cells)\n\t\t\t\t\t.map((cell) => cell.actionTable.filter)\n\t\t\t\t\t.join(\" \");\n\t\t\t\tconsole.log(\"content\", content);\n\n\t\t\t\tif (this.shouldHide(filterForWholeRow, content, regexOpt)) {\n\t\t\t\t\tdisplay = \"none\";\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 3.4 if columnName is not action-table then run filter against td cell content\n\t\t\tcells.forEach((cell, i) => {\n\t\t\t\tconst content = cell.actionTable.filter;\n\t\t\t\tconst filter = this.filters[this.cols[i]];\n\t\t\t\tif (!filter) return;\n\n\t\t\t\tif (this.shouldHide(filter, content, regexOpt)) {\n\t\t\t\t\tdisplay = \"none\";\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// 3.5 set display\n\t\t\trow.style.display = display;\n\t\t});\n\n\t\t// if there are no rows visible then display no results tfoot\n\t\tthis.tfoot.style.display = this.rowsShown.length === 0 ? \"table-footer-group\" : \"none\";\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.timeEnd(\"filterTable\");\n\t}\n\n\tprivate shouldHide(filter: SingleFilterObject, content: string, regexOpt: string): boolean {\n\t\t// console.log(\"shouldHide\", filter, content);\n\t\tif (filter.values && filter.values.length > 0) {\n\t\t\t// 1. build regex from filterValues array (checkboxes and select menus send arrays)\n\t\t\tlet regexPattern = filter.values.join(\"|\");\n\t\t\tif (filter.exclusive) {\n\t\t\t\tconst regexParts = filter.values.map((str) => `(?=.*${str})`);\n\t\t\t\tregexPattern = `${regexParts.join(\"\")}.*`;\n\t\t\t}\n\t\t\tconst regex = new RegExp(regexPattern, regexOpt);\n\n\t\t\t// 2. check if content matches\n\t\t\tif (!regex.test(content)) {\n\t\t\t\t// console.log(\"hide\", columnName, content);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\t// console.log(\"show\", columnName, content);\n\t\t}\n\t\treturn false;\n\t}\n\n\t// Simple rowsShown getter; not an attribute\n\tget rowsShown() {\n\t\treturn this.rowsArray.filter((row) => row.style.display !== \"none\");\n\t}\n\n\t/* -------------------------------------------------------------------------- */\n\t/*        Public Method: sort table based on column name and direction        */\n\t/* -------------------------------------------------------------------------- */\n\t/* ----------- Used by sort header buttons and attributes callback ----------- */\n\t/* ------------- Also triggered by local storage and URL params ------------- */\n\n\tpublic sortTable(columnName = this.sort, direction = this.direction) {\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.time(\"sortTable\");\n\t\tcolumnName = columnName.toLowerCase();\n\t\t// 1. Get column index from column name\n\t\tconst columnIndex = this.cols.findIndex((col) => col === columnName);\n\t\t// 2. If column exists and there are rows then sort\n\t\tif (columnIndex >= 0 && this.rowsArray.length > 0) {\n\t\t\t// eslint-disable-next-line no-console\n\t\t\tconsole.log(`sort by ${columnName} ${direction}`);\n\n\t\t\t// 1. Sort rows\n\t\t\tthis.customSort(this.rowsArray, columnIndex);\n\n\t\t\t// 2. Update DOM\n\t\t\tthis.rowsArray.forEach((row, i) => {\n\t\t\t\t// 2.1 Add row to tbody\n\t\t\t\tthis.tbody.appendChild(row);\n\n\t\t\t\t// 2.1 On first row, update aria-sort on ths\n\t\t\t\tif (i < 1) {\n\t\t\t\t\tthis.ths.forEach((th, i) => {\n\t\t\t\t\t\tconst ariaSort = i === columnIndex ? direction : \"none\";\n\t\t\t\t\t\tth.setAttribute(\"aria-sort\", ariaSort);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// 3. Add/Remove sorted class on colGroup based on columnIndex\n\t\t\t// const colGroupCols = this.querySelectorAll(\"col\");\n\t\t\tthis.colGroupCols.forEach((colGroupCol, i) => {\n\t\t\t\tif (i === columnIndex) {\n\t\t\t\t\tcolGroupCol.classList.add(\"sorted\");\n\t\t\t\t} else {\n\t\t\t\t\tcolGroupCol.classList.remove(\"sorted\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.timeEnd(\"sortTable\");\n\t}\n\n\t/* --------------------------- Private Sort Method -------------------------- */\n\n\tprivate customSort(rows: HTMLTableRowElement[], columnIndex: number): HTMLTableRowElement[] {\n\t\treturn rows.sort((r1, r2) => {\n\t\t\t// 1. If descending sort, swap rows\n\t\t\tif (this.direction === \"descending\") {\n\t\t\t\tconst temp = r1;\n\t\t\t\tr1 = r2;\n\t\t\t\tr2 = temp;\n\t\t\t}\n\n\t\t\t// 2. Get content\n\t\t\tconst c1 = r1.children[columnIndex] as ActionCell;\n\t\t\tconst c2 = r2.children[columnIndex] as ActionCell;\n\t\t\tconst v1 = c1.actionTable.sort;\n\t\t\tconst v2 = c2.actionTable.sort;\n\n\t\t\t// console.log(\"values\", v1, v2);\n\n\t\t\treturn this.alphaNumSort(v1, v2);\n\t\t});\n\t}\n\n\tpublic alphaNumSort(v1: string, v2: string) {\n\t\tfunction isNumber(s: string) {\n\t\t\treturn !isNaN(Number(s));\n\t\t}\n\n\t\t// 1. If both values are numbers, sort by number\n\t\tif (isNumber(v1) && isNumber(v2)) {\n\t\t\t// console.log(\"Both numbers\", v1, v2);\n\t\t\treturn Number(v1) - Number(v2);\n\t\t} else {\n\t\t\t// 2. If only one of the values is a number, prioritize it\n\t\t\tif (isNumber(v1)) {\n\t\t\t\t// console.log(\"Is Number\", v1);\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (isNumber(v2)) {\n\t\t\t\t// console.log(\"Is Number\", v2);\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t}\n\n\t\t// 3. If both values are strings, sort by string\n\t\t// console.log(\"both string\", v1, v2);\n\n\t\treturn v1.localeCompare(v2);\n\t}\n}\n\ncustomElements.define(\"action-table\", ActionTable);\n"],"names":["ActionTable","__publicField","_a","value","direction","name","oldValue","newValue","customEls","actionTableFilters","el","node","customElementsArray","element","customElementsDefinedArray","timeoutPromise","_","reject","columnName","values","exclusive","filters","lsActionTable","lsActionTableJSON","lsActionTableFilters","params","key","event","table","rows","th","colGroup","col","tfoot","cell","cellContent","svg","checkbox","row","cells","i","tbody","mutations","mutation","target","regexOpt","filterForWholeRow","display","content","filter","regexPattern","str","columnIndex","ariaSort","colGroupCol","r1","r2","temp","c1","c2","v1","v2","isNumber"],"mappings":"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"}