var p=Object.defineProperty;var f=(o,n,t)=>n in o?p(o,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[n]=t;var d=(o,n,t)=>(f(o,typeof n!="symbol"?n+"":n,t),t);class m extends HTMLElement{constructor(){super();d(this,"shadow");this.shadow=this.attachShadow({mode:"open"})}static get observedAttributes(){return["col","options"]}get col(){var t;return((t=this.getAttribute("col"))==null?void 0:t.trim().toLowerCase())||""}get options(){return this.getAttribute("options")||""}set options(t){this.setAttribute("options",t)}addEventListeners(){this.shadow.addEventListener("change",t=>{const s=t.target;if(s.tagName==="SELECT"){const e=this.col;if(e){const i=s.value,l={col:e,value:i};this.dispatchEvent(new CustomEvent("action-table-filter",{detail:l,bubbles:!0}))}}})}resetFilter(){var s;const t=(s=this.shadowRoot)==null?void 0:s.querySelector("select");t&&(t.value="")}findOptions(t){var a,r,u;t=t.toLowerCase();const s=(a=this.closest("action-table"))==null?void 0:a.querySelectorAll("table thead th"),e=Array.from(s).findIndex(c=>{var b;return((b=c.dataset.col)==null?void 0:b.toLowerCase())===t||c.innerText.toLowerCase()===t});if(e===-1)return;const i=(r=this.closest("action-table"))==null?void 0:r.querySelectorAll(`table tbody td:nth-child(${e+1})`),l=(u=this.closest("action-table"))==null?void 0:u.querySelectorAll(`table tbody td:nth-child(${e+1}) > *`);let h=[];l&&l.length>0?h=Array.from(l).map(c=>c.innerText):h=Array.from(i).map(c=>c.innerText),this.options=Array.from(new Set(h)).join(",")}connectedCallback(){this.options||this.findOptions(this.col),this.render(),this.addEventListeners()}render(){const t="<style>label{display:inline-block;margin-inline-end:.5em}</style>",s=`<label part="label"><slot>Filter by ${this.col}</slot></label><select part="select" name="filter-${this.col}" data-col="${this.col}"><option value="">All</option>${this.options.split(",").map(e=>`<option value="${e}">${e}</option>`)}</select>`;this.shadow.innerHTML=`${t}${s}`}}customElements.define("action-table-filter-menu",m);class v extends HTMLElement{constructor(){super();d(this,"shadow");this.shadow=this.attachShadow({mode:"open"})}static get observedAttributes(){return["col","filter"]}get col(){var t;return((t=this.getAttribute("col"))==null?void 0:t.trim().toLowerCase())||""}get filter(){var t;return((t=this.getAttribute("filter"))==null?void 0:t.trim().toLowerCase())||""}connectedCallback(){this.render(),this.addEventListeners()}render(){const t='<style>:host{--action-table-filter-switch-checked:green}label{display:inline-flex;align-items:center}input{appearance:none;position:relative;display:inline-block;background:var(--action-table-filter-switch-unchecked);cursor:pointer;height:1.4em;width:2.75em;vertical-align:middle;border-radius:2em;box-shadow:0 1px 3px #0003 inset;transition:.25s linear background;margin-inline-end:.5em}input::before{content:"";display:block;width:1em;height:1em;background:#fff;border-radius:1em;position:absolute;top:.2em;left:.2em;box-shadow:0 1px 3px #0003;transition:.25s linear transform;transform:translateX(0)}:checked{background:var(--action-table-filter-switch-checked)}:checked::before{transform:translateX(1rem)}input:focus{outline:transparent}input:focus-visible{outline:2px solid var(--action-table-filter-switch-focus);outline-offset:2px}</style>',s=`<label>
        <input type="checkbox" />
        <slot>Show Only ${this.filter} for ${this.col}</slot>
      </label>`;this.shadow.innerHTML=`${t}${s}`}addEventListeners(){this.shadow.addEventListener("click",t=>{let e=t.target.checked?this.filter:"",i={col:this.col,value:e};this.dispatchEvent(new CustomEvent("action-table-filter",{detail:i,bubbles:!0}))})}resetFilter(){const t=this.shadow.querySelector("input");t&&(t.checked=!1)}}customElements.define("action-table-filter-switch",v);class w extends HTMLElement{constructor(){super();d(this,"filters")}connectedCallback(){this.filters=this.querySelectorAll("select, input[type=checkbox], input[type=radio]"),this.addEventListeners()}resetAllFilters(){this.filters.forEach(s=>{if(s.type==="checkbox"){const e=s;e.checked=!1}if(s.type==="radio"){const e=s;(e.value="")?e.checked=!0:e.checked=!1}s.tagName.toLowerCase()==="select"&&(s.value="")});const t=this.querySelectorAll("action-table-filter-menu, action-table-filter-switch");t==null||t.forEach(s=>{s.resetFilter()})}addEventListeners(){var s;(s=this.filters)==null||s.forEach(e=>{if(e.type==="checkbox"){const i=e;i.addEventListener("change",()=>{const l=Array.from(this.filters).filter(a=>{if(a.type==="checkbox"){const r=a;return r.type==="checkbox"&&r.name===i.name&&r.checked}else return!1}).map(a=>a.value);let h={col:i.name,value:l};this.dispatchEvent(new CustomEvent("action-table-filter",{detail:h,bubbles:!0}))})}e.type==="radio"&&e.addEventListener("change",()=>{const i={col:e.name,value:e.value};this.dispatchEvent(new CustomEvent("action-table-filter",{detail:i,bubbles:!0}))}),e.tagName.toLowerCase()==="select"&&e.addEventListener("change",()=>{const i={col:e.name,value:e.value};this.dispatchEvent(new CustomEvent("action-table-filter",{detail:i,bubbles:!0}))})});const t=this.querySelector("button[type=reset]");t==null||t.addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("action-table-filter-reset",{bubbles:!0}))}),this.addEventListener("action-table-filter-reset",()=>{this.resetAllFilters()})}}customElements.define("action-table-filters",w);
//# sourceMappingURL=action-table-filters.js.map
