var p=Object.defineProperty;var f=(o,s,t)=>s in o?p(o,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[s]=t;var c=(o,s,t)=>(f(o,typeof s!="symbol"?s+"":s,t),t);import"./action-table.js";import"./action-table-filters.js";class m extends HTMLElement{constructor(){super();c(this,"shadow");this.shadow=this.attachShadow({mode:"open"})}static get observedAttributes(){return["col","options"]}get col(){var t;return((t=this.getAttribute("col"))==null?void 0:t.trim().toLowerCase())||""}get options(){return this.getAttribute("options")||""}set options(t){this.setAttribute("options",t)}addEventListeners(){this.shadow.addEventListener("change",t=>{const e=t.target;if(e.tagName==="SELECT"){const i=this.col;if(i){const l=e.value,r={col:i,value:l};this.dispatchEvent(new CustomEvent("action-table-filter",{detail:r,bubbles:!0}))}}})}resetFilter(){var e;const t=(e=this.shadowRoot)==null?void 0:e.querySelector("select");t&&(t.value="")}findOptions(t){var h,d,u;t=t.toLowerCase();const e=(h=this.closest("action-table"))==null?void 0:h.querySelectorAll("table thead th"),i=Array.from(e).findIndex(n=>{var b;return((b=n.dataset.col)==null?void 0:b.toLowerCase())===t||n.innerText.toLowerCase()===t});if(i===-1)return;const l=(d=this.closest("action-table"))==null?void 0:d.querySelectorAll(`table tbody td:nth-child(${i+1})`),r=(u=this.closest("action-table"))==null?void 0:u.querySelectorAll(`table tbody td:nth-child(${i+1}) > *`);let a=[];r&&r.length>0?a=Array.from(r).map(n=>n.innerText):a=Array.from(l).map(n=>n.innerText),this.options=Array.from(new Set(a)).join(",")}connectedCallback(){this.findOptions(this.col),this.render(),this.addEventListeners()}render(){const t="<style>label{display:inline-block;margin-inline-end:.5em}</style>",e=`<label part="label"><slot>Filter by ${this.col}</slot></label><select part="select" name="filter-${this.col}" data-col="${this.col}"><option value="">All</option>${this.options.split(",").map(i=>`<option value="${i}">${i}</option>`)}</select>`;this.shadow.innerHTML=`${t}${e}`}}class w extends HTMLElement{constructor(){super();c(this,"shadow");this.shadow=this.attachShadow({mode:"open"})}static get observedAttributes(){return["col","filter"]}get col(){var t;return((t=this.getAttribute("col"))==null?void 0:t.trim().toLowerCase())||""}get filter(){var t;return((t=this.getAttribute("filter"))==null?void 0:t.trim().toLowerCase())||""}connectedCallback(){this.render(),this.addEventListeners()}render(){const t='<style>:host{--action-table-filter-switch-checked:green}label{display:inline-flex;align-items:center}input{appearance:none;position:relative;display:inline-block;background:var(--action-table-filter-switch-unchecked);cursor:pointer;height:1.4em;width:2.75em;vertical-align:middle;border-radius:2em;box-shadow:0 1px 3px #0003 inset;transition:.25s linear background;margin-inline-end:.5em}input::before{content:"";display:block;width:1em;height:1em;background:#fff;border-radius:1em;position:absolute;top:.2em;left:.2em;box-shadow:0 1px 3px #0003;transition:.25s linear transform;transform:translateX(0)}:checked{background:var(--action-table-filter-switch-checked)}:checked::before{transform:translateX(1rem)}input:focus{outline:transparent}input:focus-visible{outline:2px solid var(--action-table-filter-switch-focus);outline-offset:2px}</style>',e=`<label>
        <input type="checkbox" />
        <slot>Show Only ${this.filter} for ${this.col}</slot>
      </label>`;this.shadow.innerHTML=`${t}${e}`}addEventListeners(){this.shadow.addEventListener("click",t=>{let i=t.target.checked?this.filter:"",l={col:this.col,value:i};this.dispatchEvent(new CustomEvent("action-table-filter",{detail:l,bubbles:!0}))})}resetFilter(){const t=this.shadow.querySelector("input");t&&(t.checked=!1)}}customElements.define("action-table-filter-menu",m);customElements.define("action-table-filter-switch",w);
//# sourceMappingURL=main.js.map
